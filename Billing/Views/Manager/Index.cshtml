@model IEnumerable<Contract>
@{
	ViewBag.Title	= "Contracts";
	
	var statuses	= ViewBag.Statuses;
}

<partial name="_ManagerMenuPartial" />

<div class="container body-content">
	
	<h2>Договоры</h2>
	
	<p>
		@Html.ActionLink("Создать новый договор", "CreateContract", "Manager")
	</p>
	
	<div class="form-group has-search">
		<input type="text" id="search" class="form-control" placeholder="Поиск">
	</div>
	
	<table class="table">
		<thead>
		<tr>
			<th>Id</th>
			<th>Менеджер</th>
			<th>Клиент</th>
			<th>Услуга</th>
			<th>Статус</th>
		</tr>
		</thead>

		<tbody>
		@foreach (var contract in Model)
		{
			<tr>
				<td class="searchable">
					@contract.Id
				</td>
				<td class="searchable">
					@contract.Manager.Name
				</td>
				<td class="searchable">
					@Html.ActionLink(contract.Client.Name, "GetClient", "Manager",
						new { id = contract.Client.Id }, null)
				</td>
				<td class="searchable">
					@contract.Favour.Name
				</td>
				<td>
					@Html.DropDownList(nameof(Status), new SelectList(statuses, nameof(Status.Id),
						nameof(Status.Name), contract.Status.Id), new {@class = "status"})
				</td>
				<td>
					@* TODO: удалить это *@
					@* @Html.ActionLink("Edit |", "UpdateCustomer", new { id =  item.Id})*@
					@* @Html.ActionLink("Details", "Details", new { id =  item.Id})*@
					@* @Html.ActionLink("Delete", "Delete", new { id =  item.Id})*@
				</td>
			</tr>
		}
		</tbody>
	</table>
</div>

@section scripts {
	<script src="~/manager/js/index.js"></script>
}
